
import { Readability } from '../../readability/index.js'
import { DOMParser } from 'linkedom'
import { isString } from 'bellajs'

const run = (html, inputUrl = '') => {
  if (!isString(html)) {
    return null
  }
  const doc = new DOMParser().parseFromString(html, 'text/html')
  const base = doc.createElement('base')
  base.setAttribute('href', inputUrl)
  doc.head.appendChild(base)
  const reader = new Readability(doc, {
    keepClasses: true,
    // debug: true
  })
  const result = reader.parse() ?? {}
  return result
  // return result.textContent ? result.content : null
}

const url = 'http://www.acac.cn/index.php?m=content&c=index&a=show&catid=41&id=4705'
const html = `<html xmlns="http://www.w3.org/1999/xhtml" data-locator-client-url="chrome-extension://npbfdllefekhdplbkdigpncggmojpefi/client.bundle.js" data-locator-target="vscode"><head data-locator-hook-status-message="No valid renderers found.">\n<meta http-equiv="Content-Type" content="text/html; charset=gbk">\n<meta http-equiv="X-UA-Compatible" content="IE=7">\n<title>我院再次举办就业信息统计监测专题培训会议 - 学院要闻 - 安徽中澳科技职业学院</title>\n<meta name="keywords" content="安徽中澳科技职业学院">\n<meta name="description" content="3月17日下午,学院举办2023年毕业生就业信息统计监测工作第二次专题培训会，邀请“安徽省大学生就业服务平台”工程师张金华到会指导。党委书记汪源浩、副院长李钟，学生处、各系部负责人及毕业班辅导员30余人参加   ">\n<link rel="stylesheet" href="http://www.acac.cn/statics/css/style_index.css" type="text/css">\n\n\n\n\x3C!--\x3Cscript type="text/javascript" src="http://www.acac.cn/statics/js/lrtk.js">\x3C/script>自动滚动代码-->\n\x3Cscript src="https://hm.baidu.com/hm.js?7325993b9ef7f654cc6dcd8483cd7c01">\x3C/script>\x3Cscript>\nvar _hmt = _hmt || [];\n(function() {\n  var hm = document.createElement("script");\n  hm.src = "https://hm.baidu.com/hm.js?7325993b9ef7f654cc6dcd8483cd7c01";\n  var s = document.getElementsByTagName("script")[0]; \n  s.parentNode.insertBefore(hm, s);\n})();\n\x3C/script>\n\n</head>\n<body bgcolor="#FFFFFF" text="#000000" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">\n<div class="top">\n<div class="top_main">\n  <a href="http://www.acac.cn"><div class="logo"></div></a>\n <div class="top_main_01"><a href="http://www.acac.cn">网站首页</a>　|　<a href="http://www.acac.cn/index.php?m=content&amp;c=index&amp;a=lists&amp;catid=223">联系我们</a>　|　\x3Cscript language="JavaScript" type="text/javascript">\n\x3C!--\nvar enabled = 0; today = new Date();\nvar day; var date;\nif(today.getDay()==0) day = " 星期日"\nif(today.getDay()==1) day = " 星期一"\nif(today.getDay()==2) day = " 星期二"\nif(today.getDay()==3) day = " 星期三"\nif(today.getDay()==4) day = " 星期四"\nif(today.getDay()==5) day = " 星期五"\nif(today.getDay()==6) day = " 星期六"\ndate = (today.getFullYear()) + "年" + (today.getMonth() + 1 ) + "月" + today.getDate() + "日" + day +"";\ndocument.write(date);  // -->\x3C/script>2023年4月10日 星期一<div class="bd" style="text-align:right;">\n<form action="http://www.acac.cn/index.php?m=search&amp;c=index&amp;a=init&amp;typeid=0" method="get" target="_blank">\n\t\t\t\t<input type="hidden" name="m" value="search">\n\t\t\t\t<input type="hidden" name="c" value="index">\n\t\t\t\t<input type="hidden" name="a" value="init">\n\t\t\t\t<input type="hidden" name="typeid" value="0" id="typeid">\n\t\t\t\t<input type="hidden" name="siteid" value="1" id="siteid">\n                <input type="text" class="text" name="q" id="q"><input type="submit" value="搜 索">\n            </form>       \n        </div>\n</div>\n</div>\n<div class="clearfloat"></div>\n\x3Cscript type="text/javascript" src="http://www.acac.cn/statics/js/jquery.js">\x3C/script>\n  \x3Cscript type="text/javascript">\nvar timeout         = 500;\nvar closetimer\t\t= 0;\nvar ddmenuitem      = 0;\n\nfunction jsddm_open()\n{\tjsddm_canceltimer();\n\tjsddm_close();\n\tddmenuitem = $(this).find('ul').eq(0).css('visibility', 'visible');}\n\nfunction jsddm_close()\n{\tif(ddmenuitem) ddmenuitem.css('visibility', 'hidden');}\n\nfunction jsddm_timer()\n{\tclosetimer = window.setTimeout(jsddm_close, timeout);}\n\nfunction jsddm_canceltimer()\n{\tif(closetimer)\n\t{\twindow.clearTimeout(closetimer);\n\t\tclosetimer = null;}}\n\n$(document).ready(function()\n{\t$('#jsddm > li').bind('mouseover', jsddm_open);\n\t$('#jsddm > li').bind('mouseout',  jsddm_timer);});\n\ndocument.onclick = jsddm_close;\n  \x3C/script>\n  <div id="nav">\x3C!-- style="background-color:#333"-->\n<ul id="jsddm">\x3C!-- style="background-color:#333"-->\n<li>\n\t\t<a href="http://www.acac.cn/index.php?m=content&amp;c=index&amp;a=lists&amp;catid=49" class="first">学院概况</a>\n\t\t<ul> \n\t\t\t<li><a href="http://www.acac.cn/index.php?m=content&amp;c=index&amp;a=lists&amp;catid=49">学院简介</a></li>\n                        <li><a href="http://www.acac.cn/index.php?m=content&amp;c=index&amp;a=lists&amp;catid=574">学院章程</a></li>\n\t\t\t<li><a href="http://www.acac.cn/index.php?m=content&amp;c=index&amp;a=lists&amp;catid=50">现任领导</a></li>\n                        <li><a href="http://www.acac.cn/index.php?m=content&amp;c=index&amp;a=lists&amp;catid=436">学院视频</a></li>\n                        <li><a href="http://www.acac.cn/index.php?m=content&amp;c=index&amp;a=lists&amp;catid=51">校园风光</a></li>\n\t\t</ul>\n\t</li>\n\t<li><a href="http://www.acac.cn/index.php?m=content&amp;c=index&amp;a=lists&amp;catid=32">机构设置</a></li>\n\t<li>\n    <a href="http://www.acac.cn/html/jwc/" target="_blank">教学科研</a>\n      \t<ul> \n\t\t\t<li><a href="http://www.acac.cn/html/jwc/" target="_blank">教学管理</a></li>\n\t\t\t<li><a href="http://www.acac.cn/html/kybgs/" target="_blank">科研管理</a></li>\n\t\t\t\n            <li><a href="http://www.acac.cn/html/ddz/" target="_blank">教学督导</a></li>\n\t\t</ul>\n    </li>\n\t<li>\n\t\t<a href="http://www.acac.cn/html/zs/" target="_blank">招生网</a>\n\t</li>\n\t<li><a href="http://www.acac.cn/html/jycyzd/" target="_blank">就业创业</a></li>\n\t<li>\n\t\t<a href="http://www.acac.cn/html/tw/" target="_blank">校园文化</a>\n\t\t<ul> \n\t\t\t<li><a href="http://www.acac.cn/html/tw/" target="_blank">院团委</a></li>\n\t\t\t<li><a href="http://www.acac.cn/index.php?m=content&amp;c=index&amp;a=lists&amp;catid=400" target="_blank">院学生会</a></li>\n\t\t\t<li><a href="http://www.acac.cn/index.php?m=content&amp;c=index&amp;a=lists&amp;catid=401" target="_blank">社团活动</a></li>\n\t\t</ul>\n\t</li>\n    \t<li>\n\t\t<a>国际合作</a>\n\t\t<ul style="visibility: hidden;"> \n\t\t\t<li><a href="http://www.acac.cn/html/ielts/" target="_blank">IELTS考试</a></li>\n                        <li><a href="http://www.acac.cn/html/jtest/" target="_blank">J.TEST考试中心</a></li>\n\t\t\t<li><a href="http://www.acac.cn/html/gjjlzx/" target="_blank">国际交流</a></li>\n\t\t</ul>\n\t</li>\n\t<li style="border:none;"><a href="http://www.acac.cn/html/xxgk/" target="_blank" class="last">信息公开</a></li>\n</ul>\n</div>\n<div class="clearfloat"></div><div class="dc_nav">\n <div class="dc_nav01"><a href="http://www.acac.cn">网站首页</a><span> &gt; </span><a href="http://www.acac.cn/index.php?m=content&amp;c=index&amp;a=lists&amp;catid=39">新闻中心</a> &gt; <a href="http://www.acac.cn/index.php?m=content&amp;c=index&amp;a=lists&amp;catid=41">学院要闻</a> &gt;  正文</div>\n</div>\n<div class="main">\n<div class="dc_nav_main">\n<h1>我院再次举办就业信息统计监测专题培训会议</h1>\n <div class="dc_top">日期：2023-03-31 12:12:00&nbsp;&nbsp;&nbsp;来源：&nbsp;&nbsp;&nbsp; 点击：<span id="hits">321</span></div>\n\x3Cscript language="JavaScript" src="http://www.acac.cn/api.php?op=count&amp;id=4705&amp;modelid=1">\x3C/script>\n</div>\n<div class="dc_main">\n<p><span style="font-family: 宋体, SimSun; font-size: 18px;">3月17日下午,学院举办2023年毕业生就业信息统计监测工作第二次专题培训会，邀请“安徽省大学生就业服务平台”工程师张金华到会指导。党委书记汪源浩、副院长李钟，学生处、各系部负责人及毕业班辅导员30余人参加培训会。<br></span></p><p><span style="font-family: 宋体, SimSun; font-size: 18px;">会议学习和传达了教育部、省教育厅关于高校毕业生就业信息统计工作的文件和政策要求；<font a='x22'>！！！！！！！！！我！！！！！！！！</font>张金华工程师全面介绍了“安徽省大学生就业服务平台”的使用功能、操作方法，并进行了现场演示；获得就业工作先进集体和先进个人的信息工程与艺术设计系、辅导员陈世改分享了就业工作的经验做法和心得体会。</span></p><p><span style="font-family: 宋体, SimSun; font-size: 18px;">汪源浩强调，就业工作要全面谋划，落实到位，首先要压实责任，就业创业办公室要做好统筹协调，各系部要着力增强毕业生的就业满意度；其次要严格落实“四不准”“三严禁”要求，确保就业数据的准确性；最后要完善考评制度，充分调动就业工作队伍的主动性、积极性，不断提高我院毕业生就业工作水平。</span><span style="font-family: 宋体, SimSun; font-size: 18px;">（撰稿/学生处 吴晓晴 编辑/徐彍锴 编审/王宝玉 审核/李钟 汪源浩 ）</span></p><p><br></p></div>\n</div>\n<div class="clearfloat"></div>\n\x3C!-- 代码结束 -->\n<div class="clearfloat"></div>\n<div class="footer">\n <div class="footer_main">\n   <div class="footer_left">\n     <ul>\n    <li><img src="http://www.acac.cn/statics/images/wap.png" width="89" height="89" border="0" alt="手机浏览">手机浏览</li>\n  <li><img src="http://www.acac.cn/statics/images/weixin.png" width="89" height="89" border="0" alt="关注微信">关注微信</li>\n     </ul>\n   </div>\n  <div class="footer_right">\n<div align="right">\n<font color="#06c"><a href="http://172.16.80.108:8081/seeyon/index.jsp" target="_blank">协同办公</a>　|　<a href="http://mail.acac.cn/" target="_blank">邮箱系统</a>　|　<a href="http://www.acac.cn/index.php?m=admin&amp;c=index&amp;a=login&amp;pc_hash=ulWVfP" target="_blank">网站管理</a>　|　<a href="http://www.acac.cn/index.php?m=guestbook&amp;c=index&amp;a=register" target="_blank">院长信箱</a>　|　<a href="http://www.acac.cn/index.php?m=content&amp;c=index&amp;a=lists&amp;catid=223" target="_blank">联系我们</a></font><br>\nCopyright 2017 www.acac.cn All Rights Reserved \n              安徽中澳科技职业学院 版权所有<br>\n              地址：安徽省 合肥市 濉溪路312号 备案号：<a href="http://beian.miit.gov.cn/" target="_blank">皖ICP备14012129号</a>  <img src="http://www.acac.cn/statics/images/wgwab.png"> 皖公网安备: <a href="www.beian.gov.cn/portal/registerSystemInfo?recordcode=34010302000683" target="_blank">34010302000683号</a> <br>\n<a href="https://tongji.baidu.com/web/welcome/login"><img src="http://www.acac.cn/statics/images/baidu.gif" width="67" height="18" border="0"> </a></div>\n   </div>\n </div>\n</div>\n\n</div></body></html>`

const c = run(html, url)

console.log(c)
